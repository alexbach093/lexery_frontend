# Context Info — контекст для нових чатів

Документ містить зібрану інформацію про проєкт, автора, прийняті рішення, типові помилки та стиль спілкування. Призначений для того, щоб новий чат (або нова сесія) могла продовжити роботу без втрати контексту.

---

## 1. Хто ти (користувач)

- **Ім’я:** Олександр (Oleksandr).
- **Email:** alexlawon@gmail.com (відображається в профілі в сайдбарі LEXERY).
- **Роль:** замовник/розробник продукту LEXERY, SaaS для українського ринку.
- **Мова:** українська в інтерфейсі та в комунікації з асистентом (відповідати українською, коли пишуть українською).

---

## 2. Про проєкт LEXERY

- **Що це:** SaaS-продукт для українського ринку — AI-чат/воркспейс (подібно до ChatGPT/Perplexity).
- **Стек:** Next.js, React, TypeScript, Tailwind (частково inline styles), Lottie (boot-анімація), Figma (дизайн, експорт SVG).
- **Локальний запуск:** `npm run dev` → Node-сервер (server.js), порт 3000 (або 3001, 3002… якщо зайнятий).
- **Репозиторій:** GitHub, гілка `chore/bootstrap-frontend` (наприклад, lexery_frontend).

**Основні екрани/зони:**

- **Головна `/`:** спочатку boot-екран поверх воркспейсу, потім плавний перехід у основний контент (без зміни URL).
- **Boot:** частина головної сторінки, не окремий «продуктовий» маршрут; `/boot` лише редірект на `/`.
- **Workspace:** сайдбар (260px) + основний контент (привітання, поле вводу AI, чат з повідомленнями, кнопка «Поради», прев’ю файлів тощо).

---

## 3. Твій процес і етап

- **Етап:** фронтенд-бутстрап: вже є layout, boot, сайдбар, чат (список повідомлень, бульбашки user/assistant), поле вводу, прев’ю файлів. Бекенд/API для реального чату ще не підключений (mock-відповіді).
- **Процес:** ітерації по UI за макетами (Figma); точне відтворення кнопок, іконок, кольорів, відступів. Часто є референси в чаті (скріншоти, фрагменти HTML/CSS). Важливо не вигадувати від себе — використовувати тільки те, що надано (наприклад, «DO NOT USE other sources» стосувалось саме цього).
- **Коміти:** conventional commits (наприклад `feat:`, `chore:`), commitlint, lint-staged, ESLint. Якщо коміт падає — спочатку виправити лінт/commitlint, потім знову коміт і пуш.

---

## 4. Прийняті рішення (щоб не відкатувати без запиту)

- **Boot і головна сторінка:**
  - Boot — частина основного воркспейсу (показується на `/` поверх контенту).
  - Тривалість boot залежить від завантаження main space: завершення після `onReady` від WorkspaceMain.
  - Мінімальний час показу boot до моменту `onReady`: **50 ms**.
  - Плавна поява workspace і сайдбару: **600 ms** fade-in після зникнення boot (500 ms fade-out boot).
- **Маршрути:**
  - `/` — єдина точка входу з boot, потім workspace.
  - `/boot` — редірект на `/` (не окремий «доменний» сценарій).
  - `/workspace` — прямий вхід у воркспейс без boot.
- **Розміри AI space (основний екран, чат):**
  - Ширина контенту чату та поля вводу: **688 px** (було 750/900 — повернуто до 688).
  - Обгортка блоку привітання з полем вводу: **693 px**.
  - Максимальна ширина бульбашки повідомлення користувача: **570 px**.
  - Відстань між повідомленнями (user/LLM): **72 px** (gap у списку повідомлень).
- **Центрування:** було запит «відцентруй все» — після цього користувач просив скасувати цей промпт; масове центрування не застосовувати без явного запиту.
- **Локальний сервер:** при зайнятому порту (наприклад 3000) сервер пробує наступні порти (3001, 3002, …), щоб уникнути EADDRINUSE.

---

## 5. Помилки, яких варто уникати (з історії чату)

- **Layout головної сторінки:** спочатку структура була «повний безлад» — сайдбар і контент не відповідали макету. Потрібно чітко дотримуватись порядку: сайдбар зліва (260px), основний контент справа; кнопка «Поради» у верхньому правому куті контенту; boot поверх усього.
- **Іконка «Поради»:** були плутанини між «location pin з окликом» і «лампочка»; в підсумку використовується лампочка (outline + суцільна основа). При наявності референсу — робити строго по ньому.
- **Центрування:** не робити глобальне «відцентруй все» без підтвердження; користувач скасовував такі зміни.
- **Boot-таймер:** не робити тільки фіксовані 3 секунди і не робити перехід тільки по готовності workspace без мінімуму. Поточна логіка: перехід після `onReady`, але не раніше ніж 50 ms показу boot.
- **Коміти:** не ігнорувати лінт. Типові проблеми:
  - Виклик «нечистої» функції під час рендеру (наприклад `Date.now()` в `useRef(Date.now())`) — краще ініціалізувати в `useEffect` або через lazy ref.
  - Синхронний `setState` у `useEffect` (cascading render) — при потребі скидання стану за залежностями можна використати відкладений виклик (наприклад `setTimeout(..., 0)`) або переосмислити логіку.
  - Невикористані аргументи компонентів — префіксувати `_` (наприклад `_suggestions`, `_onSuggestionClick`) або використовувати.
  - У CLI-скриптах (наприклад export-іконки) — дозволені лише `console.warn`/`console.error` або `eslint-disable no-console` для всього файлу.
  - Commit message: обов’язково conventional format (`type: subject`), інакше commitlint відхилить.

---

## 6. Як ти любиш, щоб тобі відповідали

- **Мова:** українською, коли ти пишеш українською; без зайвого англійського в користувацькому інтерфейсі (UI залишається українською).
- **Стиль:** по суті, без зайвих відступів; коротко що зроблено і де зміни, якщо це технічні правки.
- **Дизайн і специфікації:** коли надані макети, скріншоти або готовий HTML/CSS — робити максимально відповідно до них, не підставляти «з голови» інші джерела чи стилі без запиту.
- **Скасування:** якщо ти просиш скасувати попередній крок (наприклад «скасуй мій попередній промпт») — повертати стан коду до попереднього, без додаткових «покращень».
- **Числа й розміри:** коли ти вказуєш конкретні значення (наприклад 750px, 570px, 50 ms) — використовувати їх буквально, не округляти і не замінювати на «зручніші» без підтвердження.

---

## 7. Структура проєкту (орієнтири)

- **Маршрути:** `src/app/page.tsx` (головна з boot), `src/app/workspace/page.tsx`, `src/app/boot/page.tsx` (редірект на `/`), `src/app/boot-error/page.tsx`.
- **Компоненти:**  
  `BootScreen`, `AppLayout`, `WorkspaceSidebar`, `WorkspaceMain`, `ChatMessageList`, `ChatMessage`, `FilePreview`; layout у `src/components/layout/`.
- **Типи:** `src/types/chat.ts` (Message тощо).
- **Стилі/ассети:** `src/app/globals.css`, `public/images/` (workspace/, chat/, boot).
- **Документація:** `docs/` — BOOTSTRAP, LAYOUT_AND_PAGES, CHANGELOG-BOOT-SCREEN, boot-screen-implementation; цей файл — `docs/context-info.md`.

---

## 8. Корисні константи (поточний стан)

| Що                           | Значення |
| ---------------------------- | -------- |
| Ширина сайдбару              | 260 px   |
| Ширина контенту чату / input | 688 px   |
| Обгортка привітання          | 693 px   |
| Max ширина бульбашки user    | 570 px   |
| Gap між повідомленнями       | 72 px    |
| Мін. час boot до onReady     | 50 ms    |
| Fade-out boot                | 500 ms   |
| Fade-in workspace / sidebar  | 600 ms   |

---

_Останнє оновлення контексту: зібрано після сесії, де були зміни boot→onReady, плавні переходи, розміри 688/570, редірект /boot→/, коміт і пуш на GitHub._
